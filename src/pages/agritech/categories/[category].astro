---
import TaxonLayout from "@components/agritech/TaxonLayout.astro";
import { 
  getFirebaseCategories, 
  getFirebaseBlogEntriesByCategory, 
  type BlogEntry 
} from "@lib/firebaseLoader";

export async function getStaticPaths() {
  const categories = await getFirebaseCategories();
  const paths = categories.map((category) => ({
    params: {
      category: category,
    },
    props: { taxon: category },
  }));
  return paths;
}

const { taxon } = Astro.props;
const filteredEntries: BlogEntry[] = await getFirebaseBlogEntriesByCategory(taxon!);
---

<TaxonLayout taxon={taxon} entries={filteredEntries} />
