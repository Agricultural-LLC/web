---
import TaxonLayout from "@components/agritech/TaxonLayout.astro";
import { 
  getFirebaseTags, 
  getFirebaseBlogEntriesByTag, 
  type BlogEntry 
} from "@lib/firebaseLoader";

export async function getStaticPaths() {
  const tags = await getFirebaseTags();
  const paths = tags.map((tag) => ({
    params: {
      tag: tag,
    },
    props: { taxon: tag },
  }));
  return paths;
}

const { taxon } = Astro.props;
const filteredEntries: BlogEntry[] = await getFirebaseBlogEntriesByTag(taxon!);
---

<TaxonLayout taxon={taxon} entries={filteredEntries} />
